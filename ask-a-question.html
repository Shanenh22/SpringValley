<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Ask a Question | Spring Valley Dental Associates</title>
<meta name="description" content="Have a dental question? Contact Spring Valley Dental Associates in Dallas, TX. Our experienced team will reply by email or phone to help with your concerns."/>
<meta name="robots" content="index, follow"/>
<link rel="canonical" href="https://springvalleydentistry.com/ask-a-question.html"/>

<!-- CSS -->
<link href="css/styles.css" rel="stylesheet"/>
<link rel="stylesheet" href="css/cleaned-additional-css.css"/>

<!-- Fonts (non-blocking) -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link href="https://fonts.gstatic.com" rel="preconnect" crossorigin/>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" onload="this.rel='stylesheet'"/>
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"/></noscript>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" onload="this.rel='stylesheet'"/>
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap"/></noscript>

<!-- Open Graph -->
<meta property="og:site_name" content="Spring Valley Dental Associates"/>
<meta property="og:title" content="Ask a Question | Spring Valley Dental Associates"/>
<meta property="og:description" content="Have a dental question? Our team will reply by email or phone to help with your concerns."/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://springvalleydentistry.com/ask-a-question.html"/>
<meta property="og:image" content="https://springvalleydentistry.com/images/building_front_with_logo.jpg"/>

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="Ask a Question | Spring Valley Dental Associates"/>
<meta name="twitter:description" content="Have a dental question? Our team will reply by email or phone to help with your concerns."/>
<meta name="twitter:image" content="https://springvalleydentistry.com/images/building_front_with_logo.jpg"/>
<meta name="twitter:url" content="https://springvalleydentistry.com/ask-a-question.html"/>

<!-- PWA / Brand -->
<link rel="manifest" href="/site.webmanifest"/>
<link rel="icon" href="/images/favicon.svg" type="image/svg+xml">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png"/>
<meta name="theme-color" content="#f8f9fa"/>

<!-- Breadcrumbs JSON-LD -->
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList",
 "itemListElement":[
  {"@type":"ListItem","position":1,"name":"Home","item":"https://springvalleydentistry.com/"},
  {"@type":"ListItem","position":2,"name":"Ask a Question","item":"https://springvalleydentistry.com/ask-a-question.html"}
 ]}
</script>

<!-- GA loads via analytics.js in the deferred stack -->
</head>
<body>
<!-- Skip link -->
<a class="skip-to-content" href="#main">Skip to content</a>

<!-- JS-injected Header -->
<div id="site-header"></div>

<main id="main" class="section" style="max-width: 900px; margin-inline: auto;">
  <!-- Page Header -->
  <section class="contact-hero" style="margin-bottom: 3rem;">
    <h1>Ask a Question</h1>
    <p>Have a dental question? Our experienced team is here to help. Fill out the form below and we'll reply by email or phone.</p>
  </section>

  <!-- Contact Form -->
  <form class="contact-form" id="ask-form" novalidate>
    <h2 class="sr-only">Question Form</h2>
    
    <!-- Honeypot + start time for anti-spam -->
    <div class="hp-wrap" aria-hidden="true" hidden>
      <label for="company">Company</label>
      <input autocomplete="organization" id="company" name="company" tabindex="-1" type="text"/>
      <input id="startTime" name="startTime" type="hidden"/>
    </div>

    <div class="form-row">
      <div class="form-group" id="fg-firstName">
        <label for="firstName">First name</label>
        <input autocomplete="given-name" class="form-control" id="firstName" name="firstName" required type="text"/>
        <div class="error" id="err-firstName"></div>
      </div>
      <div class="form-group" id="fg-lastName">
        <label for="lastName">Last name</label>
        <input autocomplete="family-name" class="form-control" id="lastName" name="lastName" required type="text"/>
        <div class="error" id="err-lastName"></div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group" id="fg-email">
        <label for="email">Email</label>
        <input autocomplete="email" class="form-control" id="email" inputmode="email" name="email" placeholder="name@example.com" required type="email"/>
        <div class="error" id="err-email"></div>
      </div>
      <div class="form-group" id="fg-phone">
        <label for="phone">Phone</label>
        <input autocomplete="tel" class="form-control" id="phone" inputmode="tel" name="phone" placeholder="(555) 123-4567" required type="tel"/>
        <div class="error" id="err-phone"></div>
      </div>
    </div>

    <div class="form-group" id="fg-topic">
      <label for="topic">What is your question about?</label>
      <select class="form-control" id="topic" name="topic" required>
        <option value="">Select a topicâ€¦</option>
        <option>Appointments & scheduling</option>
        <option>Insurance & benefits</option>
        <option>Treatment & recommendations</option>
        <option>Post-visit concerns</option>
        <option>Pricing & financing</option>
        <option>Emergency dental care</option>
        <option>Other</option>
      </select>
      <div class="error" id="err-topic"></div>
    </div>

    <div class="form-group" id="fg-message">
      <label for="message">Your question</label>
      <textarea class="form-control" id="message" name="message" required rows="6" placeholder="Please describe your question or concern in detail..."></textarea>
      <div class="error" id="err-message"></div>
    </div>

    <!-- Lightweight human challenge -->
    <div class="form-group challenge" id="fg-chal">
      <label for="challenge" id="chal-label">Quick check: <span id="chal-q">Loadingâ€¦</span></label>
      <input autocomplete="off" class="form-control" id="challenge" inputmode="numeric" name="challenge" required type="text"/>
      <div class="error" id="err-challenge"></div>
    </div>

    <div class="button-group">
      <button class="form-button" type="submit">Send Question</button>
    </div>

    <div class="disclaimer">
      <p>By submitting, you consent to be contacted about your question. We never share your information and all communications are HIPAA-compliant.</p>
    </div>

    <div class="captcha" id="cf-turnstile"></div>
  </form>

  <!-- Alternative Contact Methods -->
  <section class="section" style="margin-top: 3rem;">
    <div class="contact-info-grid">
      <div class="contact-info-card">
        <div class="icon" aria-hidden="true">ðŸ“ž</div>
        <h3>Call Our Office</h3>
        <p>Prefer to speak directly? Our friendly staff is ready to help.</p>
        <a class="button-primary" href="tel:+19728522222">(972) 852-2222</a>
      </div>

      <div class="contact-info-card">
        <h3>Common Questions</h3>
        <p>Find answers to frequently asked questions about our services and procedures.</p>
        <a class="button-secondary" href="faq.html">Visit FAQ</a>
      </div>

      <div class="contact-info-card">
        <h3>Schedule Appointment</h3>
        <p>Ready to book your visit? Use our online scheduling system.</p>
        <a class="button-secondary" href="contact.html">Book Online</a>
      </div>
    </div>
  </section>
</main>

<!-- JS-injected Footer -->
<div id="footer-placeholder"></div>

<!-- Global Patient Quick Actions (mobile only) -->
<nav class="sticky-cta-bar" role="navigation" aria-label="Patient quick actions">
  <a class="cta-link call" href="tel:+19728522222" aria-label="Call our office">Call</a>
  <a class="cta-link book" href="contact.html" aria-label="Book an appointment online">Book</a>
  <a class="cta-link directions" href="https://www.google.com/maps/place/14228+Midway+Rd+%23100,+Dallas,+TX+75244/@32.943659,-96.838108,14z/data=!4m6!3m5!1s0x864c26d39eab13f3:0x3e1243026b4b017b!8m2!3d32.9436588!4d-96.8381082!16s%2Fg%2F11qpmyb56j?hl=en-US&entry=ttu&g_ep=EgoyMDI1MDgyNS4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener" aria-label="Directions and hours">Directions</a>
</nav>

<div id="nav-status" class="sr-only" aria-live="polite" aria-atomic="true"></div>

<!-- Page script: validation + mailto compose -->
<script>
(function() {
  const form = document.getElementById('ask-form');
  const toAddress = 'info@springvalleydentistry.com'; // NOTE: keep or change to your preferred domain

  // Spam controls
  const hp = document.getElementById('company');
  const startTime = document.getElementById('startTime');
  startTime.value = Date.now().toString();

  // Simple math challenge
  const qEl = document.getElementById('chal-q');
  const answerEl = document.getElementById('challenge');
  const a = Math.floor(3 + Math.random() * 7); // 3..9
  const b = Math.floor(2 + Math.random() * 8); // 2..9
  const ans = a + b;
  qEl.textContent = `${a} + ${b} = ?`;

  // Rate limit (client-side) â€“ block >3 sends/hour
  function tooManySubmissions() {
    try {
      const key = 'svd_ask_submissions';
      const now = Date.now();
      const hour = 60*60*1000;
      let arr = JSON.parse(localStorage.getItem(key) || '[]').filter(t => now - t < hour);
      if (arr.length >= 3) return true;
      arr.push(now);
      localStorage.setItem(key, JSON.stringify(arr));
      return false;
    } catch(e) { return false; }
  }

  function setError(id, msg) {
    const fg = document.getElementById('fg-' + id);
    const err = document.getElementById('err-' + id);
    if (fg) fg.classList.add('invalid');
    if (err) err.textContent = msg || '';
  }
  function clearError(id) {
    const fg = document.getElementById('fg-' + id);
    const err = document.getElementById('err-' + id);
    if (fg) fg.classList.remove('invalid');
    if (err) err.textContent = '';
  }

  function validEmail(v) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(v.trim());
  }
  function validPhone(v) {
    const digits = v.replace(/\D+/g, '');
    return digits.length >= 10 && digits.length <= 15;
  }

  // Field refs
  const firstName = document.getElementById('firstName');
  const lastName  = document.getElementById('lastName');
  const email     = document.getElementById('email');
  const phone     = document.getElementById('phone');
  const topic     = document.getElementById('topic');
  const message   = document.getElementById('message');

  // Live-clear on input
  [firstName,lastName,email,phone,topic,message,answerEl].forEach(el => {
    el.addEventListener('input', () => clearError(el.id.replace('challenge','chal')));
    el.addEventListener('blur',  () => clearError(el.id.replace('challenge','chal')));
  });

  form.addEventListener('submit', function(e) {
    e.preventDefault();

    // Reset errors
    ['firstName','lastName','email','phone','topic','message','chal'].forEach(clearError);

    // Honeypot check
    if (hp.value) { setError('firstName', 'Something went wrong.'); return; }

    // Min fill time (5s)
    const elapsed = Date.now() - Number(startTime.value || 0);
    if (elapsed < 5000) { setError('chal', 'Please take a moment to complete the form.'); return; }

    // Client rate-limit
    if (tooManySubmissions()) { setError('chal', 'Please try again later.'); return; }

    let ok = true;
    if (!firstName.value.trim()) { setError('firstName', 'First name is required'); ok = false; }
    if (!lastName.value.trim())  { setError('lastName',  'Last name is required');  ok = false; }
    if (!validEmail(email.value)) { setError('email', 'Enter a valid email address'); ok = false; }
    if (!validPhone(phone.value)) { setError('phone', 'Enter a valid phone number'); ok = false; }
    if (!topic.value)             { setError('topic', 'Select a topic'); ok = false; }
    if (!message.value.trim())    { setError('message', 'Please enter your question'); ok = false; }
    if (String(ans) !== answerEl.value.trim()) { setError('chal','Incorrect answer'); ok = false; }

    if (!ok) return;

    // Compose mailto with sanitized body
    const lines = [
      `Name: ${firstName.value.trim()} ${lastName.value.trim()}`,
      `Email: ${email.value.trim()}`,
      `Phone: ${phone.value.trim()}`,
      `Topic: ${topic.value}`,
      '',
      message.value.trim()
    ];
    const subject = encodeURIComponent('Website Question â€“ Spring Valley Dental Associates');
    const body = encodeURIComponent(lines.join('\n'));
    const href = `mailto:${toAddress}?subject=${subject}&body=${body}`;
    window.location.href = href;
  });
})();
</script>

<!-- External link safety enhancer -->
<script>
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('a.directions, a[href*="google.com/maps"]').forEach(a => {
    if (!a.hasAttribute('target')) a.setAttribute('target', '_blank');
    if (!a.hasAttribute('rel')) a.setAttribute('rel', 'noopener');
  });
});
</script>

<!-- Focus-aware anchor (sticky-header offset + keyboard focus) -->
<script>
document.addEventListener('click', function(e){
  const a = e.target.closest('a[href^="#"]');
  if (!a) return;
  if (a.origin !== location.origin || a.pathname !== location.pathname) return;
  const id = a.getAttribute('href').slice(1);
  const el = document.getElementById(id);
  if (!id || !el) return;
  e.preventDefault();
  const header = document.querySelector('.site-header');
  const offset = (header ? header.getBoundingClientRect().height : 0) + 16;
  const y = el.getBoundingClientRect().top + window.pageYOffset - offset;
  const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  window.scrollTo({ top: y, behavior: reduce ? 'auto' : 'smooth' });
  const prev = el.getAttribute('tabindex');
  el.setAttribute('tabindex','-1'); el.focus({preventScroll:true});
  el.addEventListener('blur', () => { if (prev === null) el.removeAttribute('tabindex'); else el.setAttribute('tabindex', prev); }, { once:true });
  history.pushState(null, '', '#' + id);
});
</script>

<!-- Standard script stack (all defer; header.js before nav.js) -->
<script defer src="js/scripts.js"></script>
<script defer src="site-config.js"></script>
<script defer src="js/header.js"></script>
<script defer src="nav.js"></script>
<script defer src="analytics.js"></script>
<script defer src="js/cta-config.js"></script>
<script defer src="js/menu-enhancements.js"></script>
<script defer src="js/footer.js"></script>
</body>
</html>
